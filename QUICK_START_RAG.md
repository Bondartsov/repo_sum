# üöÄ –ë–´–°–¢–†–´–ô –°–¢–ê–†–¢: –ü–†–û–í–ï–†–ö–ê RAG –°–ò–°–¢–ï–ú–´

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Python 3.8+
- 4GB+ RAM (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 8GB)
- Docker (–¥–ª—è Qdrant) –∏–ª–∏ –ª–æ–∫–∞–ª—å–Ω—ã–π Qdrant
- –ò–Ω—Ç–µ—Ä–Ω–µ—Ç –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –º–æ–¥–µ–ª–µ–π FastEmbed

## ‚ö° –ó–∞ 5 –º–∏–Ω—É—Ç –¥–æ —Ä–∞–±–æ—Ç—ã

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
# –®–∞–≥ 1: –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞
git clone <repo>
cd repo_sum
pip install -r requirements.txt

# –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–∑–æ–≤—ã—Ö –∏–º–ø–æ—Ä—Ç–æ–≤
python -c "from rag import CPUEmbedder, QdrantVectorStore; print('‚úÖ RAG –∏–º–ø–æ—Ä—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç')"
```

### –ó–∞–ø—É—Å–∫ Qdrant

#### –í–∞—Ä–∏–∞–Ω—Ç A: Docker (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
```bash
docker run -d -p 6333:6333 -p 6334:6334 \
    -v $(pwd)/qdrant_storage:/qdrant/storage \
    qdrant/qdrant
```

#### –í–∞—Ä–∏–∞–Ω—Ç B: Qdrant Cloud
–°–æ–∑–¥–∞—Ç—å –∫–ª–∞—Å—Ç–µ—Ä –Ω–∞ https://cloud.qdrant.io
–û–±–Ω–æ–≤–∏—Ç—å settings.json —Å API –∫–ª—é—á–æ–º

---

## üß™ –ü–†–û–í–ï–†–ö–ê –ü–û –®–ê–ì–ê–ú

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–∑–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤
```bash
# –ë–∞–∑–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
pytest tests/test_rag_imports.py tests/test_vector_store_basic.py -v

# –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: –≤—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã ‚úÖ
```

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Qdrant
```bash
python main.py rag status

# –û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:
# üü¢ Qdrant: –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ (localhost:6333)
# üìä –ö–æ–ª–ª–µ–∫—Ü–∏—è code_chunks: –Ω–µ —Å–æ–∑–¥–∞–Ω–∞
```

### –®–∞–≥ 3: –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
```bash
python main.py rag index tests/fixtures/test_repo --batch-size 32

# –û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:
# üîÑ –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è: tests/fixtures/test_repo
# üìÅ –ù–∞–π–¥–µ–Ω–æ —Ñ–∞–π–ª–æ–≤: 6
# üß© –°–æ–∑–¥–∞–Ω–æ —á–∞–Ω–∫–æ–≤: ~25
# ‚ö° –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤...
# üìä –ò–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–æ: 25/25 [100%]
# ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ –∑–∞ ~10-30s
```

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–∏—Å–∫–∞
```bash
python main.py rag search "user authentication" --top-k 3

# –û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:
# üîç –ü–æ–∏—Å–∫: "user authentication"  
# üìä –ù–∞–π–¥–µ–Ω–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤: 3
#
# üéØ 1. tests/fixtures/test_repo/auth/user.py:15-25 (score: 0.85+)
#    class User:
#        def authenticate(self, password):
#            ...
```

### –®–∞–≥ 5: –ü—Ä–æ—Å—Ç–æ–π –Ω–∞–≥—Ä—É–∑–æ—á–Ω—ã–π —Ç–µ—Å—Ç
```bash
# –ù–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–∏—Å–∫–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –ø–æ–¥—Ä—è–¥
python main.py rag search "database connection" --top-k 5
python main.py rag search "validation functions" --top-k 5  
python main.py rag search "helper utilities" --top-k 5

# –ö–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å –¥–æ–ª–∂–µ–Ω –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –∑–∞ <200ms
```

### –®–∞–≥ 6: –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–µ —Ç–µ—Å—Ç—ã
```bash
# –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
pytest tests/rag/test_rag_integration.py -v

# E2E —Ç–µ—Å—Ç—ã CLI
pytest tests/rag/test_rag_e2e_cli.py::TestRagCliE2E::test_rag_search_command -v

# –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö RAG —Ç–µ—Å—Ç–æ–≤
python tests/rag/run_rag_tests.py smoke
```

---

## üêõ –†–ï–®–ï–ù–ò–ï –ü–†–û–ë–õ–ï–ú

### –ü—Ä–æ–±–ª–µ–º–∞: "Connection refused" –∫ Qdrant
**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ Qdrant –∑–∞–ø—É—â–µ–Ω
docker ps | grep qdrant

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
docker stop $(docker ps -q --filter ancestor=qdrant/qdrant)
docker run -d -p 6333:6333 -p 6334:6334 qdrant/qdrant
```

### –ü—Ä–æ–±–ª–µ–º–∞: "FastEmbed model download failed"
**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç –∏ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å
python -c "from fastembed import TextEmbedding; TextEmbedding('BAAI/bge-small-en-v1.5')"

# –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å sentence-transformers
# –û–±–Ω–æ–≤–∏—Ç—å –≤ settings.json: "provider": "sentence-transformers"
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ú–µ–¥–ª–µ–Ω–Ω–∞—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è
**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –£–≤–µ–ª–∏—á–∏—Ç—å batch size
python main.py rag index /path/to/repo --batch-size 64

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CPU/RAM
python main.py rag status --detailed
```

---

## ‚úÖ –ö–†–ò–¢–ï–†–ò–ò –£–°–ü–ï–•–ê

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:
- [ ] ‚úÖ Qdrant –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è (rag status)
- [ ] ‚úÖ –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç (rag index) 
- [ ] ‚úÖ –ü–æ–∏—Å–∫ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
- [ ] ‚úÖ –í—Å–µ –±–∞–∑–æ–≤—ã–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:
- [ ] ‚úÖ –ü–æ–∏—Å–∫ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∑–∞ <200ms
- [ ] ‚úÖ –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è >5 —Ñ–∞–π–ª–æ–≤/—Å–µ–∫
- [ ] ‚úÖ –ü–∞–º—è—Ç—å <500MB –¥–ª—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

### –ö–∞—á–µ—Å—Ç–≤–æ –ø–æ–∏—Å–∫–∞:
- [ ] ‚úÖ "authentication" –Ω–∞—Ö–æ–¥–∏—Ç auth –º–æ–¥—É–ª–∏
- [ ] ‚úÖ "database" –Ω–∞—Ö–æ–¥–∏—Ç db –º–æ–¥—É–ª–∏
- [ ] ‚úÖ "validation" –Ω–∞—Ö–æ–¥–∏—Ç validators.py

---

## üéØ –ß–¢–û –î–ê–õ–¨–®–ï?

### –î–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:
1. **–ò–Ω–¥–µ–∫—Å–∏—Ä—É–π—Ç–µ –≤–∞—à —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:**
   ```bash
   python main.py rag index /path/to/your/project --batch-size 512
   ```

2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫:**
   ```bash
   python main.py rag search "OAuth integration" --lang python --top-k 10
   ```

3. **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
   ```bash
   python main.py rag status --detailed
   ```

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–ª—å—à–µ:
- M2: –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–∏—Å–∫ (BM25 + dense)
- M3: Web UI –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- M4: Production —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ

---

## üìö –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –†–ï–°–£–†–°–´

- [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ RAG —Å–∏—Å—Ç–µ–º—ã](.clinerules/RAG_architecture.md)
- [–ü–æ–¥—Ä–æ–±–Ω—ã–µ —Ç–µ—Å—Ç—ã](tests/rag/README.md)
- [–û—Ç—á—ë—Ç –æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏](tests/rag/test_report.md)
- [–û—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](README.md)

**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** ~10-15 –º–∏–Ω—É—Ç  
**–°—Ç–∞—Ç—É—Å:** –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é ‚úÖ