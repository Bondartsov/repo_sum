# Project Memory Bank (.clinerules)
I. Фаза Plan (Планирование)
1. Загрузка и анализ контекста из Memory Bank (.clinerules)
Чтение накопленной памяти:
Перед началом новой задачи агент должен автоматически загрузить содержимое всех ключевых файлов Memory Bank (.clinerules):
projectbrief.md: Общие цели и описание проекта.
productContext.md: Обоснование необходимости продукта и проблемы, которые он решает.
systemPatterns.md и techContext.md: Архитектурные решения, используемые технологии, ограничения и паттерны.
activeContext.md: Текущий фокус разработки, активные задачи.
progress.md: История выполненных задач и статус текущих работ.
Допускается, что могут ещё иные md файлы в этой папке. Они так же важны к изучению.
Если каких-либо файлов не хватает или данные устарели, агент должен уведомить пользователя и предложить выполнить команды initialize memory bank или update memory bank.
​2. Формирование стратегии решения задачи
Разбиение задачи на этапы:
Опираясь на загруженный контекст из Memory Bank, агент разбивает задачу на подзадачи, согласуя их с уже принятыми архитектурными решениями и текущим состоянием проекта (данные из activeContext.md).
Выбор инструментов и методов:
При выборе подходов агент сверяется с информацией из techContext.md и systemPatterns.md, чтобы избежать противоречий и повторов.
Оценка рисков и вариантов отката:
Используя данные из progress.md, агент прогнозирует потенциальные риски и предлагает варианты отката для каждого этапа реализации.
3. Подготовка детального плана действий
Пошаговое описание:
Сформируйте детальный план, включающий:
Изменения в файлах (создание, редактирование, удаление) с указанием, как эти изменения соотносятся с данными из Memory Bank.
Команды для выполнения в терминале.
Контрольные точки, согласованные с информацией из activeContext.md и progress.md.
Согласование плана с пользователем:
Агент выводит краткое резюме плана, в котором отражаются основные сведения из Memory Bank (цели проекта, текущие задачи, технический контекст). После получения подтверждения от пользователя план утверждается для дальнейшей реализации.

II. Фаза Act (Реализация)
1. Выполнение плана с интеграцией данных из Memory Bank (.clinerules)
Строгое соблюдение утвержденного плана:
Агент выполняет операции в точном соответствии с детальным планом, сверяясь с загруженным контекстом Memory Bank для подтверждения корректности выбранных действий.
Проверка предварительных условий:
Перед каждым критическим изменением агент проверяет, что информация в projectbrief.md, productContext.md и techContext.md соответствует текущему состоянию проекта.
2. Контроль корректности выполнения и обработка ошибок
Проверка результатов:
После каждого шага агент запускает тесты или анализирует логи, сверяя полученные результаты с контрольными точками, зафиксированными в Memory Bank (особенно в progress.md и activeContext.md).
Обработка ошибок:
При возникновении ошибок агент приостанавливает выполнение, уведомляет пользователя о проблеме и предлагает варианты отката, опираясь на ранее сохранённые данные.
3. Обеспечение безопасности и подтверждение критичных операций
Запрос подтверждения:
Перед выполнением потенциально опасных операций (например, удаление файлов или масштабные изменения архитектуры) агент запрашивает явное подтверждение пользователя. При этом он может ссылаться на уже зафиксированные решения в Memory Bank.
Резервное копирование и точки отката:
Перед критическими изменениями создаются резервные копии или checkpoint'ы, а изменения фиксируются в Memory Bank для возможности отката.
4. Документирование и обновление Memory Bank (.clinerules)
Фиксация выполненных изменений:
После завершения каждого этапа агент добавляет краткий отчёт о проделанной работе в файлы:
activeContext.md: Обновление текущего фокуса разработки.
progress.md: Отметка о завершённых задачах и внесённых изменениях.
Автоматическое обновление памяти:
По команде update memory bank или при завершении логического блока работы агент пересматривает и обновляет все файлы Memory Bank, фиксируя новые решения, изменения в архитектуре и технические нюансы.
Ручное редактирование:
Если пользователь обнаруживает расхождения между текущим состоянием проекта и данными в Memory Bank, он может вручную отредактировать соответствующие файлы и попросить агента перечитать обновлённую информацию (например, с помощью команды follow your custom instructions).

---

