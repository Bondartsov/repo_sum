# Technical Context: Repository Analyzer

**–î–∞—Ç–∞:** 15 –∞–≤–≥—É—Å—Ç–∞ 2025  
**–°—Ç–∞—Ç—É—Å:** Production-Ready —Å RAG —Å–∏—Å—Ç–µ–º–æ–π  
**–í–µ—Ä—Å–∏—è:** 1.5.0

## üèóÔ∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:
- **Python 3.8+**: –û—Å–Ω–æ–≤–Ω–æ–π —è–∑—ã–∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- **OpenAI GPT API** >= 1.99.6 - –ò–ò-–∞–Ω–∞–ª–∏–∑ –∫–æ–¥–∞
- **Qdrant** >= 1.15.1 - Enterprise-ready –≤–µ–∫—Ç–æ—Ä–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å –∫–≤–∞–Ω—Ç–æ–≤–∞–Ω–∏–µ–º
- **FastEmbed** >= 0.3.6 - CPU-–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —ç–º–±–µ–¥–¥–∏–Ω–≥–∏ (ONNX Runtime)
- **Sentence-Transformers** >= 5.1.0 - fallback –ø—Ä–æ–≤–∞–π–¥–µ—Ä —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
- **Streamlit** >= 1.46.0 - –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å RAG –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π
- **AST (Abstract Syntax Tree)** - –ø–∞—Ä—Å–∏–Ω–≥ –∫–æ–¥–∞ –≤—Å–µ—Ö —è–∑—ã–∫–æ–≤
- **Markdown** - —Ñ–æ—Ä–º–∞—Ç –≤—ã—Ö–æ–¥–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

### RAG —Å–∏—Å—Ç–µ–º–∞ (Production-Ready):
```
rag/
‚îú‚îÄ‚îÄ embedder.py         # CPU-–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —ç–º–±–µ–¥–¥–µ—Ä
‚îú‚îÄ‚îÄ vector_store.py     # Qdrant –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∫–≤–∞–Ω—Ç–æ–≤–∞–Ω–∏–µ–º
‚îú‚îÄ‚îÄ query_engine.py     # –ü–æ–∏—Å–∫–æ–≤—ã–π –¥–≤–∏–∂–æ–∫ —Å RRF/MMR
‚îú‚îÄ‚îÄ indexer_service.py  # –°–µ—Ä–≤–∏—Å –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤
‚îú‚îÄ‚îÄ search_service.py   # –í—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π –ø–æ–∏—Å–∫ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π
‚îî‚îÄ‚îÄ exceptions.py       # –°–∏—Å—Ç–µ–º–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π
```

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–∞–∫—Ç—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ):
```txt
# Core dependencies
openai>=1.99.6                    # OpenAI API –∫–ª–∏–µ–Ω—Ç
streamlit>=1.46.0                 # Web UI
python-dotenv>=1.0.0              # Environment variables
click>=8.1.8                      # CLI framework
rich>=14.0.0                      # CLI UI library

# RAG System (CPU-first)
qdrant-client[fastembed]>=1.15.1  # FastEmbed + Qdrant –∫–ª–∏–µ–Ω—Ç
sentence-transformers>=5.1.0      # Fallback —ç–º–±–µ–¥–¥–∏–Ω–≥–∏
numpy>=1.24.0                     # –í–µ–∫—Ç–æ—Ä–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
psutil>=5.9.5                     # RAM –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
cachetools>=5.3.0                 # LRU/TTL –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

# Testing & Development
pytest>=8.3.4                     # –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
pytest-asyncio>=1.1.0             # –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
```

## ‚öôÔ∏è –ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### Core —Å–∏—Å—Ç–µ–º–∞:
1. **RepositoryAnalyzer** (main.py) - –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä –∞–Ω–∞–ª–∏–∑–∞
2. **FileScanner** (file_scanner.py) - —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤
3. **ParserRegistry** (parsers/) - –≤—ã–±–æ—Ä –ø–∞—Ä—Å–µ—Ä–∞ –ø–æ —Ç–∏–ø—É —Ñ–∞–π–ª–∞
4. **CodeChunker** (code_chunker.py) - —Ä–∞–∑–±–∏–≤–∫–∞ –∫–æ–¥–∞ –Ω–∞ –ª–æ–≥–∏—á–µ—Å–∫–∏–µ —á–∞—Å—Ç–∏
5. **OpenAIManager** (openai_integration.py) - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å OpenAI API
6. **DocumentationGenerator** (doc_generator.py) - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è Markdown –æ—Ç—á–µ—Ç–æ–≤

### ‚úÖ RAG —Å–∏—Å—Ç–µ–º–∞ (Production-Ready):
1. **CPUEmbedder** (rag/embedder.py) - CPU-–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —ç–º–±–µ–¥–¥–µ—Ä
2. **QdrantVectorStore** (rag/vector_store.py) - –≤–µ–∫—Ç–æ—Ä–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
3. **CPUQueryEngine** (rag/query_engine.py) - –ø–æ–∏—Å–∫–æ–≤—ã–π –¥–≤–∏–∂–æ–∫ —Å RRF + MMR
4. **IndexerService** (rag/indexer_service.py) - —Å–µ—Ä–≤–∏—Å –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏
5. **SearchService** (rag/search_service.py) - –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π –ø–æ–∏—Å–∫

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —è–∑—ã–∫–∏:
- Python (.py) - –ø–æ–ª–Ω—ã–π AST –∞–Ω–∞–ª–∏–∑
- JavaScript/TypeScript (.js, .ts, .jsx, .tsx)
- Java (.java), C++ (.cpp), C# (.cs)
- Go (.go), Rust (.rs), PHP (.php), Ruby (.rb)

## üèõÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã

### 1. –ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ**: –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –Ω–∞ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ –º–æ–¥—É–ª–∏
- Core —Å–∏—Å—Ç–µ–º–∞: –∞–Ω–∞–ª–∏–∑ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- RAG —Å–∏—Å—Ç–µ–º–∞: —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫
- Parsers: —Ä–∞—Å—à–∏—Ä—è–µ–º–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø–∞—Ä—Å–µ—Ä–æ–≤ —è–∑—ã–∫–æ–≤
- Tests: –∫–æ–º–ø–ª–µ–∫—Å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### 2. Plugin Architecture
**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ**: –†–∞—Å—à–∏—Ä—è–µ–º–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø–∞—Ä—Å–µ—Ä–æ–≤
```python
class BaseParser(ABC):
    @abstractmethod
    def parse(self, content: str) -> ParsedData
```

### 3. Configuration-Driven Development
**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ**: –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ settings.json
```python
@dataclass
class EmbeddingConfig:
    provider: str = "fastembed"
    model_name: str = "BAAI/bge-small-en-v1.5"
    batch_size_max: int = 512
```

### 4. Strategy Pattern
**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ**: –†–∞–∑–ª–∏—á–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ chunking'–∞ –∫–æ–¥–∞
- logical: –ø–æ —Ñ—É–Ω–∫—Ü–∏—è–º/–∫–ª–∞—Å—Å–∞–º
- size: –ø–æ —Ä–∞–∑–º–µ—Ä—É –≤ —Ç–æ–∫–µ–Ω–∞—Ö
- lines: –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É —Å—Ç—Ä–æ–∫

## üîÑ –ü–∞—Ç—Ç–µ—Ä–Ω—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö

### 1. Pipeline Pattern
**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ**: –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö
```
scan_files() ‚Üí chunk_code() ‚Üí analyze_with_gpt() ‚Üí generate_docs()
```

### 2. Batch Processing Pattern
**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ**: –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ —Ñ–∞–π–ª–æ–≤ –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–≥–æ API –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã –±–∞—Ç—á–µ–π: –æ—Ç 2 –¥–æ 8 —Ñ–∞–π–ª–æ–≤ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–∞–∑–º–µ—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

### 3. Caching Pattern
**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ**: –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∞–Ω–∞–ª–∏–∑–∞
- Hash-based –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–º—É —Ñ–∞–π–ª–∞
- TTL (Time To Live) –¥–ª—è –∞–≤—Ç–æ–æ—á–∏—Å—Ç–∫–∏
- –ò–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ñ–∞–π–ª–∞

### 4. RAG Search Caching (TTL)
**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ**: –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–∏—Å–∫–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
```python
from cachetools import TTLCache
search_cache = TTLCache(maxsize=1000, ttl=300)
```

### 5. Reciprocal Rank Fusion (RRF)
**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ**: –§—å—é–∂–µ–Ω dense –∏ sparse —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞
```python
def rrf(lists, k=60):
    fused = defaultdict(float)
    for lst in lists:
        for rank, (pid, _) in enumerate(lst, start=1):
            fused[pid] += 1.0 / (k + rank)
    return sorted(fused.items(), key=lambda x: x[1], reverse=True)
```

### 6. MMR Re-ranking
**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ**: –î–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞
- –ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏ –∏ —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏—è
- –ë–æ—Ä—å–±–∞ —Å –¥—É–±–ª–∏–∫–∞—Ç–∞–º–∏ –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö

## üöÄ –ü–∞—Ç—Ç–µ—Ä–Ω—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### 1. Lazy Loading Pattern
**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ**: –ó–∞–≥—Ä—É–∑–∫–∞ –ø–∞—Ä—Å–µ—Ä–æ–≤ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
```python
class ParserRegistry:
    def get_parser(self, language: str) -> BaseParser:
        if language not in self._loaded_parsers:
            self._loaded_parsers[language] = self._load_parser(language)
        return self._loaded_parsers[language]
```

### 2. Resource Pooling Pattern
**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ**: –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ OpenAI –∫–ª–∏–µ–Ω—Ç–∞
```python
class OpenAIManager:
    def __init__(self):
        self._client = OpenAI()  # –ï–¥–∏–Ω—ã–π –∫–ª–∏–µ–Ω—Ç
        self._session_cache = {}
```

### 3. Adaptive Batch Encoding
**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ**: –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π —Ä–∞–∑–º–µ—Ä –±–∞—Ç—á–∞ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
```python
import psutil

def calc_batch_size(q_len, cfg):
    avail = psutil.virtual_memory().available
    if avail > 8 * 1024**3:
        return min(cfg.batch_size_max, max(16, q_len))
    return max(cfg.batch_size_min, min(cfg.batch_size_max, q_len // 2))
```

### 4. Parallelism Threads Configuration
**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Ç–æ–∫–∞–º–∏ –¥–ª—è CPU –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
```python
def configure_threads(par):
    torch.set_num_threads(par.torch_num_threads)
    os.environ["OMP_NUM_THREADS"] = str(par.omp_num_threads)
    os.environ["MKL_NUM_THREADS"] = str(par.mkl_num_threads)
```

## üîí –ü–∞—Ç—Ç–µ—Ä–Ω—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### 1. Sanitization Pattern
**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ**: –û—á–∏—Å—Ç–∫–∞ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –≤ LLM
```python
SANITIZE_PATTERNS = [
    r"(?i)api_key\s*[:=]\s*['\"][^'\"]+['\"]",
    r"(?i)password\s*[:=]\s*['\"][^'\"]+['\"]"
]
```

### 2. Environment-based Configuration
**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ**: API –∫–ª—é—á–∏ —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```python
@property
def api_key(self) -> str:
    return os.getenv(self.api_key_env_var)
```

### 3. Validation Pattern
**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ**: –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–æ–≤ (–∑–∞—â–∏—Ç–∞ –æ—Ç DoS)
- Path traversal protection
- –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–∏–ø–æ–≤ —Ñ–∞–π–ª–æ–≤

## üìä –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞

### RAG –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (settings.json):
```json
{
  "rag": {
    "embeddings": {
      "provider": "fastembed",
      "model_name": "BAAI/bge-small-en-v1.5",
      "batch_size_max": 512,
      "normalize_embeddings": true
    },
    "vector_store": {
      "host": "localhost",
      "port": 6333,
      "collection_name": "code_chunks",
      "quantization_type": "SQ"
    },
    "query_engine": {
      "max_results": 10,
      "rrf_enabled": true,
      "mmr_enabled": true,
      "cache_ttl_seconds": 300
    }
  }
}
```

### Dataclass –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (config.py):
```python
@dataclass
class EmbeddingConfig:
    provider: str = "fastembed"
    model_name: str = "BAAI/bge-small-en-v1.5"
    batch_size_max: int = 512

@dataclass
class VectorStoreConfig:
    host: str = "localhost"
    port: int = 6333
    quantization_type: str = "SQ"

@dataclass
class QueryEngineConfig:
    max_results: int = 10
    rrf_enabled: bool = True
    mmr_enabled: bool = True
    cache_ttl_seconds: int = 300
```

## ‚ö° –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

### –î–æ—Å—Ç–∏–≥–Ω—É—Ç—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ (Production SLO):
- **–õ–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –ø–æ–∏—Å–∫–∞**: <200ms p95 ‚úÖ
- **–°–∫–æ—Ä–æ—Å—Ç—å –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏**: >10 —Ñ–∞–π–ª–æ–≤/—Å–µ–∫ ‚úÖ
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏**: <500MB –¥–ª—è 1000 –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ ‚úÖ
- **–ö–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ—Å—Ç—å**: –¥–æ 20 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π ‚úÖ

### CPU-–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
- FastEmbed —Å ONNX Runtime
- HNSW –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è CPU (m=16-32, ef_construct=64-128)
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Ç–æ–∫–∞–º–∏ (OMP_NUM_THREADS, torch.set_num_threads)
- –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –±–∞—Ç—á–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç RAM

### –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ:
- LRU –∫—ç—à —Å TTL –¥–ª—è –≥–æ—Ä—è—á–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- Hit rate >80% –¥–ª—è –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è –∑–∞–ø—Ä–æ—Å–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –∏–Ω–¥–µ–∫—Å–∞

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (5872+ —Å—Ç—Ä–æ–∫)

### –¢–∏–ø—ã —Ç–µ—Å—Ç–æ–≤:
- **Unit —Ç–µ—Å—Ç—ã** - –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã** - –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- **E2E CLI —Ç–µ—Å—Ç—ã** - –∫–æ–º–∞–Ω–¥—ã –≤ —Ä–µ–∞–ª—å–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö
- **Performance —Ç–µ—Å—Ç—ã** - –º–µ—Ç—Ä–∏–∫–∏ –∏ —Å—Ç—Ä–µ—Å—Å-—Ç–µ—Å—Ç—ã

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤:
```
tests/
‚îú‚îÄ‚îÄ test_rag_*.py              # Unit —Ç–µ—Å—Ç—ã RAG –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
‚îú‚îÄ‚îÄ rag/                       # –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–µ RAG —Ç–µ—Å—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ test_rag_integration.py
‚îÇ   ‚îú‚îÄ‚îÄ test_rag_e2e_cli.py
‚îÇ   ‚îî‚îÄ‚îÄ test_rag_performance.py
‚îî‚îÄ‚îÄ fixtures/test_repo/        # 1743 —Å—Ç—Ä–æ–∫–∏ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –∫–æ–¥–∞
```

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –º–µ—Ç—Ä–∏–∫–∏

### –õ–æ–≥–∏—Ä—É–µ–º—ã–µ –º–µ—Ç—Ä–∏–∫–∏:
- –í—Ä–µ–º—è –∞–Ω–∞–ª–∏–∑–∞ —Ñ–∞–π–ª–∞/–ø—Ä–æ–µ–∫—Ç–∞
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–∫–µ–Ω–æ–≤ –Ω–∞ –∑–∞–ø—Ä–æ—Å/–æ—Ç–≤–µ—Ç
- –ß–∞—Å—Ç–æ—Ç–∞ –∫—ç—à-–ø–æ–ø–∞–¥–∞–Ω–∏–π
- –û—à–∏–±–∫–∏ API –∏ retry —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- –ú–µ—Ç—Ä–∏–∫–∏ RAG —Å–∏—Å—Ç–µ–º—ã (–ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –ø–æ–∏—Å–∫–∞, hit rate)

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ RAG:
```python
from prometheus_client import Counter, Histogram
qdrant_requests_total = Counter("qdrant_requests_total", ["op"])
qdrant_search_latency = Histogram("qdrant_search_latency_seconds")
```

## üîÑ CI/CD –∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã:
- **Windows** - –æ—Å–Ω–æ–≤–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- **Linux** - —Å–µ—Ä–≤–µ—Ä–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
- **macOS** - desktop –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
- **Docker** - –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è (–≥–æ—Ç–æ–≤ –∫ M4)

### –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ:
1. **–õ–æ–∫–∞–ª—å–Ω–æ–µ**: pip install + streamlit
2. **Production**: VPS —Å systemd
3. **Enterprise** (M4): Docker-compose —Å Qdrant –∫–ª–∞—Å—Ç–µ—Ä–æ–º

## üîß –ü—Ä–∏–Ω—Ü–∏–ø—ã –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞

### SOLID Principles:
- **SRP**: –ö–∞–∂–¥—ã–π –∫–ª–∞—Å—Å –∏–º–µ–µ—Ç –µ–¥–∏–Ω—É—é –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å
- **OCP**: –†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å —á–µ—Ä–µ–∑ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ (–ø–∞—Ä—Å–µ—Ä—ã)
- **LSP**: –í–∑–∞–∏–º–æ–∑–∞–º–µ–Ω—è–µ–º–æ—Å—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- **ISP**: –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –ø–æ–¥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–∏
- **DIP**: –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–π, –Ω–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–π

### Best Practices:
- **DRY** - –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- **Explicit is better than implicit** - —Ç–∏–ø–∏–∑–∞—Ü–∏—è, –≤–∞–ª–∏–¥–∞—Ü–∏—è
- **Fail-fast principle** - –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ

---

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –≥–æ—Ç–æ–≤–∞ –∫ –¥–∞–ª—å–Ω–µ–π—à–µ–º—É —Ä–∞–∑–≤–∏—Ç–∏—é**: milestone M2-M4 –∏–º–µ—é—Ç –ø—Ä–æ—á–Ω—É—é –æ—Å–Ω–æ–≤—É –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –≥–∏–±—Ä–∏–¥–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞, enterprise —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è –∏ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞.
